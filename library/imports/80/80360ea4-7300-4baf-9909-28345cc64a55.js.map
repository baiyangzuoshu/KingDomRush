{"version":3,"sources":["assets\\Scripts\\Game\\Checkout.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEtF,0DAAyD;AACzD,2DAAsD;AACtD,wCAAmC;AAE7B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAS;IAA/C;QAAA,qEAqEC;QAlEG,iBAAW,GAAY,IAAI,CAAC;QAC5B,iBAAW,GAAY,IAAI,CAAC;QAC5B,SAAG,GAAa,IAAI,CAAC;QACrB,WAAK,GAAY,IAAI,CAAC;QACtB,WAAK,GAAY,IAAI,CAAC;QACtB,WAAK,GAAY,IAAI,CAAC;QACtB,eAAS,GAAC,EAAE,CAAC;;IA4DjB,CAAC;IA3DG,yBAAyB;IAEzB,yBAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QAEf,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QACrD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;QAErD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAExE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;IACzD,CAAC;IAED,8BAAW,GAAX;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC3B,IAAI,KAAK,GAAG,eAAK,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SAC3C;QACD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;IACpC,CAAC;IAGD,8BAAW,GAAX,UAAY,KAAK,EAAE,IAAI;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;QAE/B,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QACzB,OAAO;QACP,IAAI,IAAI,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE;YACtB,KAAK,GAAG,CAAC,CAAC;YACV,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;SAC5B;aACI,IAAI,IAAI,GAAG,KAAK,GAAG,CAAC,EAAE;YACvB,KAAK,GAAG,CAAC,CAAC;YACV,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;SAC7B;aACI;YACD,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;SAC7B;QAED,IAAI,QAAQ,GAAG,yBAAe,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,CAAC;QAC5D,IAAI,SAAS,GAAG,yBAAe,CAAC,WAAW,EAAE,CAAC,aAAa,EAAE,CAAC;QAE9D,IAAI,KAAK,GAAG,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;YACxC,IAAI,SAAS,GAAG,KAAK,GAAG,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YACvD,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;YACvC,QAAQ,CAAC,QAAQ,IAAI,SAAS,CAAC;YAC/B,yBAAe,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,CAAC;SAClD;IACL,CAAC;IApEgB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAqE5B;IAAD,eAAC;CArED,AAqEC,CArEqC,qBAAS,GAqE9C;kBArEoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { UIControl } from \"../../FrameWork/ui/UIControl\";\nimport GameDataManager from \"../Data/GameDataManager\";\nimport Utils from \"../Tools/Utils\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Checkout extends UIControl {\n\n\n    failed_root: cc.Node = null;\n    passed_root: cc.Node = null;\n    tip: cc.Label = null;\n    star1: cc.Node = null;\n    star2: cc.Node = null;\n    star3: cc.Node = null;\n    game_tips=[];\n    // LIFE-CYC LE CALLBACKS:\n\n    onLoad () {\n        super.onLoad();\n\n        this.failed_root = this.getChildByUrl(\"failed_root\");\n        this.passed_root = this.getChildByUrl(\"passed_root\");\n        \n        this.tip = this.getChildByUrl(\"failed_root/tip\").getComponent(cc.Label);\n\n        this.star1 = this.getChildByUrl(\"passed_root/star1\");\n        this.star2 = this.getChildByUrl(\"passed_root/star2\");\n        this.star3 = this.getChildByUrl(\"passed_root/star3\");\n    }\n    \n    show_failed() {\n        this.node.active = true;\n        if (this.game_tips.length > 0) {\n            var index = Utils.random_int(0, this.game_tips.length - 1);\n            this.tip.string = this.game_tips[index];\n        }\n        this.failed_root.active = true;\n        this.passed_root.active = false;\n    }\n    \n    \n    show_passed(total, last) {\n        this.node.active = true;\n        this.failed_root.active = false;\n        this.passed_root.active = true;\n\n        var score = 1;\n        this.star1.active = true;\n        // 评价得分\n        if (last > 2 * total / 3) {\n            score = 3;\n            this.star2.active = true;\n            this.star3.active = true;\n        }\n        else if (last > total / 3) {\n            score = 2;\n            this.star2.active = true;\n            this.star3.active = false;\n        }\n        else {\n            this.star2.active = false;\n            this.star3.active = false;\n        }\n\n        var cur_user = GameDataManager.getInstance().get_cur_user();\n        var cur_level = GameDataManager.getInstance().get_cur_level();\n\n        if (score > cur_user.level_info[cur_level]) {\n            var add_value = score - cur_user.level_info[cur_level];\n            cur_user.level_info[cur_level] = score;\n            cur_user.star_num += add_value;\n            GameDataManager.getInstance().sync_user_data();\n        }\n    }\n}\n"]}