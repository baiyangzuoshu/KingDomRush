{"version":3,"sources":["assets\\Scripts\\Tools\\LoadingDoor.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { UIControl } from \"../../FrameWork/ui/UIControl\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class LoadingDoor extends UIControl {\n    l_door: cc.Node = null;\n    r_door: cc.Node = null;\n    door_state: number = 0; // 0 表示关, 1表示开\n    anim_duration: number = 0.1;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        super.onLoad();\n\n        this.l_door = this.getChildByUrl(\"l_door\");\n        this.r_door = this.getChildByUrl(\"r_door\");\n    }\n\n    setData(state:number,duration:number){\n        this.door_state = state;\n        this.anim_duration = duration;\n        this._set_door_state(this.door_state);\n    }\n    \n    _set_door_state(state) {\n        this.door_state = state;\n        \n        var win_size = cc.winSize;\n        \n        if (this.door_state === 0) { // 关门\n            this.l_door.x = 2;\n            this.r_door.x = -2;\n        }\n        else if (this.door_state === 1) { // 开门\n            this.l_door.x = -win_size.width * 0.5;\n            this.r_door.x = win_size.width * 0.5;\n        }    \n    }\n    \n    set_door_state(state) {\n        if (this.door_state == state) {\n            return;\n        }\n        \n        this._set_door_state(state);\n    }\n    \n    close_the_door(end_func) {\n        if (this.door_state === 0) {\n            return;\n        } \n        \n        var win_size = cc.winSize;\n        this.door_state = 0;\n        this.l_door.x = -win_size.width * 0.5;\n        this.r_door.x = win_size.width * 0.5;\n        \n        var m1 = cc.moveBy(this.anim_duration, (win_size.width * 0.5 + 2), 0);\n        this.l_door.runAction(m1);\n        \n        var m2 = cc.moveBy(this.anim_duration, -(win_size.width * 0.5 + 2), 0);\n         var call_back = cc.callFunc(function() {\n            // 播放关门的音效\n            //sound_manager.play_effect(\"resources/sounds/close_door.mp3\");\n            if (end_func) {\n                end_func();\n            }\n        }.bind(this), this.l_door);\n        var seq = cc.sequence([m2, call_back]);\n        \n        this.r_door.runAction(seq);\n    }\n    \n    open_the_door(end_func) {\n        \n        if (this.door_state === 1) {\n            return;\n        }\n\n        this.door_state = 1;\n        this.l_door.x = 2;\n        this.r_door.x = -2;\n        \n\n        var win_size = cc.winSize;\n        var m1 = cc.moveBy(this.anim_duration, -win_size.width * 0.5 - 2, 0);\n        this.l_door.runAction(m1);\n        \n        var m2 = cc.moveBy(this.anim_duration, win_size.width * 0.5 + 2, 0);\n        var call_back = cc.callFunc(function() {\n            if (end_func) {\n                end_func();\n            }\n        }.bind(this), this.r_door);\n        var seq = cc.sequence([m2, call_back]);\n        this.r_door.runAction(seq);\n    }\n    \n}\n"]}