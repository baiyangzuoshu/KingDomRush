{"version":3,"sources":["assets\\Scripts\\Manager\\PlayerSoundManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class PlayerSoundManager extends cc.Component {\n    private static _instance:PlayerSoundManager=null\n    onLoad () {\n        if(null===PlayerSoundManager._instance){\n            PlayerSoundManager._instance=this\n        }\n        else{\n            this.destroy()\n            return\n        }\n    }\n\n    public static getInstance():PlayerSoundManager{\n        return PlayerSoundManager._instance\n    }\n\n    b_music_mute: number=-1 // 表示我们的背景音乐是否静音，0为没有静音，1为静音;\n    b_effect_mute:number= -1 // 表示我们的音效是否静音，0为没有静音，1为静音;\n    \n    bg_music_name:cc.AudioClip= null // 保存我们的背景音乐的文件名称的;\n    bg_music_loop:boolean= false\n    \n    set_music_mute(b_mute) {\n        if(this.b_music_mute == b_mute) { // 状态没有改变;\n            return;\n        }\n        this.b_music_mute = (b_mute) ? 1 : 0;\n        \n        // 如果是静音，那么我们就是将背景的音量调整到0，否则为1:\n        if (this.b_music_mute === 1) { // 静音\n            // cc.audioEngine.setMusicVolume(0);\n            cc.audioEngine.stopMusic(); // 停止背景音乐播放\n        }\n        else if(this.b_music_mute === 0) { // 打开\n            if (this.bg_music_name) {\n                cc.audioEngine.playMusic(this.bg_music_name, this.bg_music_loop)\n            }\n            \n            cc.audioEngine.setMusicVolume(1);\n        }\n        // 将这个参数存储到本地;\n        cc.sys.localStorage.setItem(\"music_mute\", this.b_music_mute);\n        // end \n    }\n    \n    set_effect_mute(b_mute) {\n        if (this.b_effect_mute == b_mute) {\n            return;\n        }\n        \n        this.b_effect_mute = (b_mute) ? 1 : 0;\n        /*if (this.b_effect_mute === 1) { // 静音\n            cc.audioEngine.setEffectsVolume(0);\n        }\n        else if(this.b_effect_mute === 0){\n            cc.audioEngine.setEffectsVolume(1);\n        }*/\n        \n        // 将这个参数存储到本地;\n        cc.sys.localStorage.setItem(\"effect_mute\", this.b_effect_mute);\n        // end \n    }\n    \n    stop_music() {\n        cc.audioEngine.stopMusic(); // 先停止当前正在播放的;\n        this.bg_music_name = null;\n    }\n    \n    // 播放背景音乐\n    play_music(file_name:cc.AudioClip, loop) {\n        cc.audioEngine.stopMusic(); // 先停止当前正在播放的;\n        this.bg_music_name = file_name; // 保存我们当前正在播放的背景音乐;\n        this.bg_music_loop = loop;\n        \n        if (this.b_music_mute) {\n            // cc.audioEngine.setEffectsVolume(0);\n        }\n        else {\n            // cc.audioEngine.setEffectsVolume(1);\n            cc.audioEngine.playMusic(file_name, loop); // 当我们调用playMusic的时候，volue又回到了1;\n        }\n    } \n    // end\n    \n    // 播放背景音效:\n    play_effect(file_name:cc.AudioClip) {\n        if (this.b_effect_mute) { // 如果音效静音了，直接return;\n            return;\n        }\n        cc.audioEngine.playEffect(file_name,false);\n    }\n}\n"]}