{"version":3,"sources":["assets\\Scripts\\ECS\\ECSFactory.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { ResManagerPro } from \"../../FrameWork/manager/ResManagerPro\";\nimport GameDataManager from \"../Data/GameDataManager\";\nimport { AnimateState, Enemy, TowerType } from \"../Enum\";\nimport FrameAnimate from \"../Tools/FrameAnimate\";\nimport BulletEntity from \"./Entities/BulletEntity\";\nimport EnemyEntity from \"./Entities/EnemyEntity\";\nimport { InfantryActor } from \"./Entities/InfantryActor\";\nimport ArrowEntity from \"./Entities/Tower/ArrowEntity\";\nimport CannonEntity from \"./Entities/Tower/CannonEntity\";\nimport InfantryEntity from \"./Entities/Tower/InfantryEntity\";\nimport WarlockEntity from \"./Entities/Tower/WarlockEntity\";\nimport TowerEntity from \"./Entities/TowerEntity\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class ECSFactory extends cc.Component {\n    private static _instance:ECSFactory=null\n    onLoad () {\n        if(null===ECSFactory._instance){\n            ECSFactory._instance=this\n        }\n        else{\n            this.destroy()\n            return\n        }\n\n        let canvas=cc.find(\"Canvas\");\n        this.towerNode=canvas.getChildByName(\"towerNode\");\n        this.enemyNode=canvas.getChildByName(\"enemyNode\");\n        this.bulletNode=canvas.getChildByName(\"bulletNode\");\n    }\n\n    public static getInstance():ECSFactory{\n        return ECSFactory._instance\n    }\n\n    private static entityID:number=0;\n    private towerNode:cc.Node=null;\n    private enemyNode:cc.Node=null;\n    private bulletNode:cc.Node=null;\n    //\n    async createArrowBulletEntity(tower_type:number,tower_level:number, w_pos:cc.Vec2, w_dst_pos:cc.Vec2, enemyID:number):Promise<BulletEntity>{\n        let entity:BulletEntity=new BulletEntity();\n\n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/arrow_bullet\",cc.Prefab) as cc.Prefab;\n\n        let bullet = cc.instantiate(prefab) as cc.Node;\n        this.bulletNode.addChild(bullet);\n        \n        var center_pos = this.bulletNode.convertToNodeSpaceAR(w_pos);\n        bullet.setPosition(center_pos);\n        bullet.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=bullet;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.animateComponent.dstPos=w_dst_pos;\n        entity.animateComponent.srcPos=w_pos;\n        entity.animateComponent.state=AnimateState.Start;\n\n        entity.roleComponent.level=tower_level;\n        entity.roleComponent.type=tower_type;\n\n        entity.attackComponent.enemyID=enemyID;\n\n        return entity;\n    }\n\n    async createCannonBulletEntity(tower_type:number,tower_level:number, w_pos:cc.Vec2, w_dst_pos:cc.Vec2, enemyID:number):Promise<BulletEntity>{\n        let entity:BulletEntity=new BulletEntity();\n\n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/cannon_bullet\",cc.Prefab) as cc.Prefab;\n\n        let bullet = cc.instantiate(prefab) as cc.Node;\n        this.bulletNode.addChild(bullet);\n        \n        var center_pos = this.bulletNode.convertToNodeSpaceAR(w_pos);\n        bullet.setPosition(center_pos);\n        bullet.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=bullet;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.animateComponent.dstPos=w_dst_pos;\n        entity.animateComponent.srcPos=w_pos;\n        entity.animateComponent.state=AnimateState.Start;\n\n        entity.roleComponent.level=tower_level;\n        entity.roleComponent.type=tower_type;\n\n        entity.attackComponent.enemyID=enemyID;\n\n        return entity;\n    }\n\n    async createInfantryBulletEntity(tower_type:number,tower_level:number, w_pos:cc.Vec2, w_dst_pos:cc.Vec2, enemyID:number):Promise<InfantryActor>{\n        let entity:InfantryActor=new InfantryActor();\n\n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/infantry_actor\",cc.Prefab) as cc.Prefab;\n\n        let bullet = cc.instantiate(prefab) as cc.Node;\n        this.bulletNode.addChild(bullet);\n        \n        var center_pos = this.bulletNode.convertToNodeSpaceAR(w_pos);\n        bullet.setPosition(center_pos);\n        bullet.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=bullet;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.animateComponent.dstPos=w_dst_pos;\n        entity.animateComponent.srcPos=w_pos;\n        entity.animateComponent.state=AnimateState.Start;\n\n        entity.roleComponent.level=tower_level;\n        entity.roleComponent.type=tower_type;\n\n        entity.navComponent.path.push(w_pos);\n        entity.navComponent.path.push(w_dst_pos);\n        entity.navComponent.curTime=0;\n        entity.navComponent.curIndex=0;\n        entity.navComponent.speed=GameDataManager.getInstance().infantry_actor[tower_level - 1].speed;\n\n        // 播放行走动画\n        let anim=bullet.getChildByName(\"anim\");\n        var frame_anim = anim.addComponent(FrameAnimate);\n        let walk_anim:cc.SpriteFrame[]=new Array();\n        for(let i=0;i<6;i++){\n            let frame=await ResManagerPro.Instance.IE_GetAsset(\"textures\",\"game_scene/tower/bing_tower/actor1/walk/walk1_\"+i,cc.SpriteFrame) as cc.SpriteFrame;\n            walk_anim.push(frame);\n        }\n        frame_anim.sprite_frames = walk_anim;\n        frame_anim.duration = 0.1;\n        frame_anim.play_loop();\n\n        entity.attackComponent.enemyID=enemyID;\n\n        return entity;\n    }\n\n    async createWarlockBulletEntity(tower_type:number,tower_level:number, w_pos:cc.Vec2, w_dst_pos:cc.Vec2, enemyID:number):Promise<BulletEntity>{\n        let entity:BulletEntity=new BulletEntity();\n\n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/warlock_bullet\",cc.Prefab) as cc.Prefab;\n\n        let bullet = cc.instantiate(prefab) as cc.Node;\n        this.bulletNode.addChild(bullet);\n        \n        var center_pos = this.bulletNode.convertToNodeSpaceAR(cc.v2(w_pos.x,w_pos.y+20));\n        bullet.setPosition(center_pos);\n        bullet.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=bullet;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.animateComponent.dstPos=w_dst_pos;\n        entity.animateComponent.srcPos=w_pos;\n        entity.animateComponent.state=AnimateState.Start;\n\n        entity.roleComponent.level=tower_level;\n        entity.roleComponent.type=tower_type;\n\n        entity.attackComponent.enemyID=enemyID;\n\n        return entity;\n    }\n    //\n    async createEnemyEntity(enemy_type:number,road_data:any,actor_params:any):Promise<EnemyEntity>{\n        //console.log(road_data);\n        let entity:EnemyEntity=new EnemyEntity();\n\n        let enemy_prefab:cc.Prefab=null;\n        if(Enemy.Bear==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_bear\",cc.Prefab) as cc.Prefab;\n        }\n        else if(Enemy.Forkman==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_forkman\",cc.Prefab) as cc.Prefab;\n        }\n        else if(Enemy.Small1==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_small1\",cc.Prefab) as cc.Prefab;\n        }\n        else if(Enemy.Gorilla==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_gorilla\",cc.Prefab) as cc.Prefab;\n        }\n        else if(Enemy.Small2==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_small2\",cc.Prefab) as cc.Prefab;\n        }\n        else if(Enemy.Carry==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_carry\",cc.Prefab) as cc.Prefab;\n        }\n        else if(Enemy.Small3==enemy_type){\n            enemy_prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_small3\",cc.Prefab) as cc.Prefab;\n        }\n        var enemy = cc.instantiate(enemy_prefab);\n        enemy.active = true;\n        this.enemyNode.addChild(enemy);\n        enemy.setPosition(cc.v2(road_data[0].x, road_data[0].y));\n\n        entity.navComponent.path=road_data;\n        entity.navComponent.curTime=0;\n        entity.navComponent.curIndex=0;\n        entity.navComponent.speed=actor_params.speed;\n\n        entity.transformComponent.x=road_data[0].x;\n        entity.transformComponent.y=road_data[0].y;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=enemy;\n\n        entity.unitComponent.speed=actor_params.speed;\n        entity.unitComponent.attack=actor_params.attack;\n        entity.unitComponent.health=actor_params.health;\n        entity.unitComponent.maxHp=actor_params.health;\n        entity.unitComponent.player_hurt=actor_params.player_hurt;\n        entity.unitComponent.bonues_chip=actor_params.bonues_chip;\n\n        return entity;\n    }\n    //\n    async createArrowEntity(world_pos:cc.Vec2):Promise<TowerEntity>{\n        let entity:ArrowEntity=new ArrowEntity();\n        \n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/arrow_tower\",cc.Prefab) as cc.Prefab;\n        \n        let builded_tower = cc.instantiate(prefab) as cc.Node;\n        this.towerNode.addChild(builded_tower);\n        \n        var center_pos = this.towerNode.convertToNodeSpaceAR(world_pos);\n        builded_tower.setPosition(center_pos);\n        builded_tower.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=builded_tower;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.roleComponent.type=TowerType.Arrow;\n        entity.roleComponent.level=1;\n\n        return entity;\n    }\n\n    async createWarlockEntity(world_pos:cc.Vec2):Promise<TowerEntity>{\n        let entity:WarlockEntity=new WarlockEntity();\n        \n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/warlock_tower\",cc.Prefab) as cc.Prefab;\n        \n        let builded_tower = cc.instantiate(prefab) as cc.Node;\n        this.towerNode.addChild(builded_tower);\n        \n        var center_pos = this.towerNode.convertToNodeSpaceAR(world_pos);\n        builded_tower.setPosition(center_pos);\n        builded_tower.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=builded_tower;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.roleComponent.type=TowerType.Warlock;\n        entity.roleComponent.level=1;\n\n        return entity;\n    }\n\n    async createCannonEntity(world_pos:cc.Vec2):Promise<TowerEntity>{\n        let entity:CannonEntity=new CannonEntity();\n        \n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/cannon_tower\",cc.Prefab) as cc.Prefab;\n        \n        let builded_tower = cc.instantiate(prefab) as cc.Node;\n        this.towerNode.addChild(builded_tower);\n        \n        var center_pos = this.towerNode.convertToNodeSpaceAR(world_pos);\n        builded_tower.setPosition(center_pos);\n        builded_tower.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=builded_tower;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.roleComponent.type=TowerType.Cannon;\n        entity.roleComponent.level=1;\n\n        return entity;\n    }\n\n    async createInfantryEntity(world_pos:cc.Vec2):Promise<TowerEntity>{\n        let entity:InfantryEntity=new InfantryEntity();\n        \n        let prefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Game/infantry_tower\",cc.Prefab) as cc.Prefab;\n        \n        let builded_tower = cc.instantiate(prefab) as cc.Node;\n        this.towerNode.addChild(builded_tower);\n        \n        var center_pos = this.towerNode.convertToNodeSpaceAR(world_pos);\n        builded_tower.setPosition(center_pos);\n        builded_tower.active = true;\n\n        entity.baseComponent.entityID=ECSFactory.entityID++;\n        entity.baseComponent.gameObject=builded_tower;\n\n        entity.transformComponent.x=center_pos.x;\n        entity.transformComponent.y=center_pos.y;\n\n        entity.roleComponent.type=TowerType.Infantry;\n        entity.roleComponent.level=1;\n\n        return entity;\n    }\n}\n"]}