{"version":3,"sources":["assets\\Scripts\\ECS\\ECSUtil.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEtF,qEAAoE;AACpE,2DAAsD;AACtD,0CAAsC;AAKhC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAqC,2BAAY;IAAjD;;IA+BA,CAAC;gBA/BoB,OAAO;IAExB,wBAAM,GAAN;QACI,IAAG,IAAI,KAAG,SAAO,CAAC,SAAS,EAAC;YACxB,SAAO,CAAC,SAAS,GAAC,IAAI,CAAA;SACzB;aACG;YACA,IAAI,CAAC,OAAO,EAAE,CAAA;YACd,OAAM;SACT;IACL,CAAC;IAEa,mBAAW,GAAzB;QACI,OAAO,SAAO,CAAC,SAAS,CAAA;IAC5B,CAAC;IAEM,iCAAe,GAAtB,UAAuB,YAAmB,EAAC,kBAAgC,EAAC,kBAAgC,EAAC,kBAAgC;QACzI,kBAAkB,CAAC,MAAM,IAAI,YAAY,CAAC;QAC1C,IAAI,kBAAkB,CAAC,MAAM,IAAI,CAAC,EAAE;YAChC,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC;YAC9B,kBAAkB,CAAC,MAAM,GAAC,IAAI,CAAC;YAC/B,MAAM;YACN,yBAAe,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;YACvE,2BAAY,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,kBAAM,CAAC,eAAe,CAAC,CAAC;YACxD,OAAO;SACV;aACI,EAAE,OAAO;YACV,IAAI,GAAG,GAAG,kBAAkB,CAAC,MAAM,GAAG,kBAAkB,CAAC,KAAK,CAAC;YAC/D,kBAAkB,CAAC,UAAU,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,QAAQ,GAAG,GAAG,CAAC;SACzG;IACL,CAAC;;IA7Bc,iBAAS,GAAS,IAAI,CAAA;IADpB,OAAO;QAD3B,OAAO;OACa,OAAO,CA+B3B;IAAD,cAAC;CA/BD,AA+BC,CA/BoC,EAAE,CAAC,SAAS,GA+BhD;kBA/BoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { EventManager } from \"../../FrameWork/manager/EventManager\";\nimport GameDataManager from \"../Data/GameDataManager\";\nimport { GameUI } from \"../EventName\";\nimport BaseComponent from \"./Components/BaseComponent\";\nimport RoleComponent from \"./Components/RoleComponent\";\nimport UnitComponent from \"./Components/UnitComponent\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class ECSUtil extends cc.Component {\n    private static _instance:ECSUtil=null\n    onLoad () {\n        if(null===ECSUtil._instance){\n            ECSUtil._instance=this\n        }\n        else{\n            this.destroy()\n            return\n        }\n    }\n\n    public static getInstance():ECSUtil{\n        return ECSUtil._instance\n    }\n\n    public on_bullet_shoot(attack_value:number,enemyUnitComponent:UnitComponent,enemyBaseComponent:BaseComponent,enemyRoleComponent:RoleComponent){\n        enemyUnitComponent.health -= attack_value;\n        if (enemyUnitComponent.health <= 0) {\n            enemyUnitComponent.health = 0;\n            enemyRoleComponent.isDead=true;\n            // 加金币\n            GameDataManager.getInstance().add_chip(enemyUnitComponent.bonues_chip);\n            EventManager.getInstance().emit(GameUI.show_game_uchip);\n            // end \n        }\n        else { // 更新学条\n            var per = enemyUnitComponent.health / enemyUnitComponent.maxHp;\n            enemyBaseComponent.gameObject.getChildByName(\"blood_bar\").getComponent(cc.ProgressBar).progress = per;\n        }\n    }\n}\n"]}