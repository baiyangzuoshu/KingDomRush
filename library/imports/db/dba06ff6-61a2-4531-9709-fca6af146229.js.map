{"version":3,"sources":["assets\\Scripts\\UI\\GameUIControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { EventManager } from \"../../FrameWork/manager/EventManager\";\nimport { ResManagerPro } from \"../../FrameWork/manager/ResManagerPro\";\nimport { UIControl } from \"../../FrameWork/ui/UIControl\";\nimport GameDataManager from \"../Data/GameDataManager\";\nimport { GameUI } from \"../EventName\";\nimport Checkout from \"../Game/Checkout\";\nimport GuiTowerBuilder from \"../Game/GuiTowerBuilder\";\nimport TowerBuilder from \"../Game/TowerBuilder\";\nimport LoadingDoor from \"../Tools/LoadingDoor\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GameUIControl extends UIControl {\n    door:LoadingDoor=null;\n    go_back:boolean=false;\n    pause_root:cc.Node=null;\n    setting_root:cc.Node=null;\n    blood_label:cc.Label=null;\n    uchip_label:cc.Label=null;\n    round_label:cc.Label=null;\n    blood:number=0;\n    game_started:boolean=false;\n    map_root:cc.Node=null;\n    checkout:Checkout=null;\n    game_map_set:Array<cc.Prefab>=[];\n    game_map:cc.Node=null;\n    map_tag_root:cc.Node=null;\n    all_enemy_gen:boolean=false;\n    map_level:number=0;\n    level_data:Array<any>=[];\n    cur_round:number=0;\n    cur_road_index:number=0;\n    cur_gen_total:number=0;\n    cur_gen_now:number=0;\n    cur_schedule_time:number=0;\n    enemy_prefabs:Array<cc.Prefab>=[];\n    gui_tower_builder:GuiTowerBuilder=null;\n    // use this for initialization\n    async onLoad () {\n        super.onLoad();\n        // 以后随机播放背景音乐;\n        //sound_manager.play_music(\"resources/sounds/music/game_bg1.mp3\", true);\n        // end\n        \n        await this.loadData();\n        \n        this.door = this.getChildByUrl(\"loading_door\").addComponent(LoadingDoor);\n        this.door.setData(0,0.4);\n        this.go_back = false;\n        \n        this.pause_root = this.getChildByUrl(\"anchor-center/pause_root\");\n        this.pause_root.active = false;\n        \n        this.setting_root = this.getChildByUrl(\"anchor-center/setting_root\");\n        this.setting_root.active = false;\n\n        this.gui_tower_builder = this.getChildByUrl(\"gui_tower_builder\").addComponent(GuiTowerBuilder);\n        \n        this.blood_label = this.getChildByUrl(\"anchor-lt/ugame_root/blood_label\").getComponent(cc.Label);\n        this.uchip_label = this.getChildByUrl(\"anchor-lt/ugame_root/uchip_label\").getComponent(cc.Label);\n        this.round_label = this.getChildByUrl(\"anchor-lt/ugame_root/round_label\").getComponent(cc.Label);\n        \n        this.blood = 0;\n        this.game_started = false;\n        GameDataManager.getInstance().is_game_paused = false;\n\n        this.map_root = this.getChildByUrl(\"map_root\");\n        this.checkout = this.getChildByUrl(\"checkout\").addComponent(Checkout);\n        \n        var map_level = GameDataManager.getInstance().get_cur_level();\n        if (map_level >= this.game_map_set.length) {\n            map_level = this.game_map_set.length - 1;\n        }\n        this.game_map = cc.instantiate(this.game_map_set[map_level]);\n        this.node.addChild(this.game_map);\n        this.game_map.zIndex = -100;\n\n        this.map_tag_root = this.game_map.getChildByName(\"tag_root\");\n\n        EventManager.getInstance().addEventListener(GameUI.show_tower_builder, this.show_tower_builder, this);\n    }\n\n    protected onDestroy(): void {\n        EventManager.getInstance().removeEventListener(GameUI.show_tower_builder, this.show_tower_builder, this);\n    }\n\n    async loadData(){\n        for(let i=1;i<=3;i++){\n            let mapPrefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Map/levelmap\"+i,cc.Prefab) as cc.Prefab;\n            this.game_map_set.push(mapPrefab);\n        }\n        let ememy1=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_bear\",cc.Prefab) as cc.Prefab;\n        let ememy2=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_forkman\",cc.Prefab) as cc.Prefab;\n        let ememy3=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_small1\",cc.Prefab) as cc.Prefab;\n        let ememy4=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_gorilla\",cc.Prefab) as cc.Prefab;\n        let ememy5=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_small2\",cc.Prefab) as cc.Prefab;\n        let ememy6=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_carry\",cc.Prefab) as cc.Prefab;\n        let ememy7=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"Enemy/ememy_small3\",cc.Prefab) as cc.Prefab;\n        this.enemy_prefabs.push(ememy1);\n        this.enemy_prefabs.push(ememy2);\n        this.enemy_prefabs.push(ememy3);\n        this.enemy_prefabs.push(ememy4);\n        this.enemy_prefabs.push(ememy5);\n        this.enemy_prefabs.push(ememy6);\n        this.enemy_prefabs.push(ememy7);\n    }\n    \n    start_game() {\n        if (this.game_started === true) {\n            return;\n        }\n        \n        this.all_enemy_gen = false;\n        // 删除掉集合里面所有的敌人\n        GameDataManager.getInstance().clear_ememy_set();\n        // end \n        // 取消掉所有的定时器\n        this.unscheduleAllCallbacks();\n        // end \n        \n        // 取消掉所有的塔\n        for(var i = 0; i < this.map_tag_root.children.length; i ++) {\n            var tower_builder = this.map_tag_root.children[i].addComponent(TowerBuilder);\n            tower_builder.remove_builder_tower();\n            tower_builder.setData(i+1);\n        }\n        // end \n        \n        // map_root\n        this.map_root.removeAllChildren();\n        // end \n        \n        this.game_started = true;\n        GameDataManager.getInstance().is_game_started = true;\n        this.checkout.node.active = false; \n        \n        var cur_user = GameDataManager.getInstance().get_cur_user();\n        this.blood = cur_user.blood;\n        // this.blood = 1;\n        // 同步我们的金币和血,当前第几波敌人\n        this.blood_label.string = \"\" + this.blood;\n        this.uchip_label.string = \"\" + GameDataManager.getInstance().get_uchip();\n        this.round_label.string = \"round 0 / 7\";\n        // end \n        \n\n        // 生成我们的第一个波怪物\n        this.map_level = GameDataManager.getInstance().get_cur_level();\n        var map_level = this.map_level;\n        if (map_level >= this.game_map_set.length) {\n            map_level = this.game_map_set.length - 1;\n        }\n        console.log(\"map_level #####\", map_level, this.map_level);\n\n        this.level_data = []//require(\"level\" + (map_level + 1));\n        // this.level_data = require(\"level1\");\n        this.round_label.string = \"round 0 / \" + this.level_data.length;\n        this.cur_round = 0; // 当前要产生的是第几波敌人\n        this.cur_road_index = 0; // 在非随机模式下，当前的选择路径的索引\n        this.cur_gen_total = 0; // 当前这波产生的总数\n        this.cur_gen_now = 0; // 当前已经放出的怪物数量\n        //this.gen_round_enemy();\n        // end \n    }\n\n    show_tower_builder(data) {\n        let is_builded = data.is_builded;\n        let tower_builder = data.tower_builder;\n        var s = cc.scaleTo(0.3, 1).easing(cc.easeBackOut());\n        console.log(\"show_tower_builder\",is_builded)\n        if (is_builded === false) { // 还没有塔，所以要show builder\n            this.gui_tower_builder.show_tower_builder(tower_builder);\n            this.gui_tower_builder.node.scale = 0;\n            this.gui_tower_builder.node.runAction(s);\n        }\n        else { // 已经创建，所以要显示撤销\n            this.gui_tower_builder.show_tower_undo(tower_builder);\n            this.gui_tower_builder.node.scale = 0;\n            this.gui_tower_builder.node.runAction(s);\n        }\n    }\n\n    show_game_uchip() {\n        this.uchip_label.string = \"\" + GameDataManager.getInstance().get_uchip();\n    }\n\n    // 打开这个门;\n    start() {\n        this.start_game();\n        this.door.open_the_door(null);\n    }\n    \n    // 显示失败的画面\n    show_game_failed() {\n        this.checkout.show_failed();\n    }\n    \n    on_player_attacked(hurt) {\n        if (this.game_started === false) {\n            return;\n        }\n        \n        this.blood -= hurt;\n        if (this.blood <= 0) {\n            this.blood = 0;\n            // 游戏失败结束\n            this.game_started = false;\n            GameDataManager.getInstance().is_game_started = false;\n            this.show_game_failed();\n        }\n        this.blood_label.string = \"\" + this.blood; // 更新当前的血量\n    }\n    \n    gen_one_enemy() {\n        if (this.game_started === false) {\n            return;\n        }\n        \n        if (GameDataManager.getInstance().is_game_paused) {\n            this.scheduleOnce(this.gen_one_enemy.bind(this), this.cur_schedule_time);\n            return;\n        }\n        \n        var cur_round_params = this.level_data[this.cur_round];\n                \n        var type = cur_round_params.type[this.cur_gen_now];\n        var road_set = cur_round_params.road_set;\n\n        var map_road_set = GameDataManager.getInstance().get_map_road_set();\n        \n        var enemy = cc.instantiate(this.enemy_prefabs[type]);\n        enemy.active = true;\n        this.map_root.addChild(enemy);\n        \n\n        GameDataManager.getInstance().add_ememy(enemy);\n        var actor = enemy.getComponent(\"actor\");\n        \n        var index = 0; // 跑的地图路径的索引\n        if (cur_round_params.random_road) {\n            var random_index = Math.random() * road_set.length; // [0, road_set.length]\n            random_index = Math.floor(random_index);\n            if (random_index >= road_set.length) {\n                random_index = road_set.length - 1;\n            }\n            index = road_set[random_index];\n        }\n        else {\n            index = this.cur_road_index;\n            this.cur_road_index ++;\n            if (this.cur_road_index > road_set.length) {\n                this.cur_road_index = 0;\n            }\n            index = road_set[index];\n        }\n        \n        if (index >= map_road_set.length) {\n            index = 0;\n        } \n        \n        \n        var road_data = map_road_set[index];\n        actor.set_actor_params(cur_round_params.actor_params);\n        actor.gen_at_road(road_data);\n        \n        if (this.cur_gen_now === 0) {\n            this.round_label.string = \"round \" + (this.cur_round + 1) + \" / \" + this.level_data.length;\n        }\n        \n        this.cur_gen_now ++;\n        if (this.cur_gen_now == this.cur_gen_total) { // 放下一波敌人\n            this.cur_round ++;\n            this.gen_round_enemy();\n        }\n        else {\n            var time = cur_round_params.gen_time_set[this.cur_gen_now];\n            this.cur_schedule_time = time;\n            this.scheduleOnce(this.gen_one_enemy.bind(this), time);\n        }\n    }\n    \n    think_level_pass() {\n        if (this.game_started === false || \n            this.all_enemy_gen === false ||\n            GameDataManager.getInstance().ememy_set.length > 0) {\n            this.scheduleOnce(this.think_level_pass.bind(this), 0.5);\n            return;\n        }\n\n\n        // 通关成功\n        var cur_user = GameDataManager.getInstance().get_cur_user();\n        this.checkout.show_passed(cur_user.blood, this.blood);\n        this.game_started = false;\n        // end \n    }\n\n    // 产生一波敌人\n    gen_round_enemy() {\n        if (this.cur_round >= this.level_data.length) { // 整个敌人已经产生完毕\n            this.all_enemy_gen = true; // 生成完了。\n            this.scheduleOnce(this.think_level_pass.bind(this), 0.5);\n            return;\n        }\n        \n        var cur_round_params = this.level_data[this.cur_round];\n        var time = cur_round_params.delay;\n        var num = cur_round_params.num;\n        \n        \n        this.cur_gen_total = num;\n        this.cur_gen_now = 0;\n        // 在延时条件下的非随机选路的索引\n        this.cur_road_index = 0;\n        \n        time += cur_round_params.gen_time_set[this.cur_gen_now];\n        this.cur_schedule_time = time;\n        this.scheduleOnce(this.gen_one_enemy.bind(this), time);\n        return;\n    }\n    \n    // 跳转到home场景;\n    goto_roadmap_scene() {\n        if (this.go_back === true) { // 使用变量挡住在播放动画时候的 按钮多次点击。\n            return;\n        }\n        this.checkout.node.active = false;\n        // 播放按钮的音效\n        //sound_manager.play_effect(\"resources/sounds/click.wav\");\n        \n        this.go_back = true;\n        this.door.close_the_door(function(){\n            cc.director.loadScene(\"roadmap_scene\", function() {\n                \n            });    \n        }.bind(this));\n    } \n    \n    // 游戏暂停\n    on_pause_click() {\n        this.pause_root.active = true;\n        GameDataManager.getInstance().is_game_paused = true;\n    }\n    // 游戏重新开始\n    on_resume_game_click() {\n        this.pause_root.active = false;\n        GameDataManager.getInstance().is_game_paused = false;\n    }\n    // end \n    \n    on_setting_click() {\n        this.setting_root.active = true;\n        GameDataManager.getInstance().is_game_paused = true;\n    }\n    \n    on_setting_close_click() {\n        this.setting_root.active = false;\n        GameDataManager.getInstance().is_game_paused = false;\n    }\n    \n    on_setting_replay_click() {\n        this.setting_root.active = false;\n        this.game_started = false;\n        GameDataManager.getInstance().is_game_paused = false;\n\n        this.on_replay_game_click();\n    }\n    \n    on_replay_game_click() {\n        this.start_game();\n    }\n    \n    on_start_game_click() {\n        if (this.game_started === true) {\n            return;\n        }\n        \n        \n        this.game_started = true;\n    }\n}\n"]}